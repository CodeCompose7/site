{{- $imagePath := .image | default .imagePath }}
{{- $text := .text }}
{{- $context := .context }}

{{- if or $imagePath $text }}
  <div class="mb-8 lg:mb-0 lg:mr-6 lg:flex-shrink-0 lg:w-2/5">
    {{- if $imagePath }}
      {{- $img := $context.Resources.GetMatch $imagePath }}
      {{- if not $img }}
        {{- /* Try assets/banner/ first, then fallback to other paths */}}
        {{- $bannerPath := printf "banner/%s" $imagePath }}
        {{- $img = resources.Get $bannerPath }}
      {{- end }}
      {{- if not $img }}
        {{- $img = resources.Get $imagePath }}
      {{- end }}
      {{- if $img }}
        <div class="mb-2 overflow-hidden rounded-2xl sidebar-hero-img-wrapper">
          <img
            src="{{ $img.Permalink }}"
            alt="{{ $text | default "" }}"
            class="h-full w-full object-cover"
            {{ if $context.Site.Params.enableImageLazyLoading | default true }}
              loading="lazy"
            {{ end }}
          />
        </div>
      {{- else }}
        {{- /* Fallback to static path */}}
        <div class="mb-2 overflow-hidden rounded-2xl sidebar-hero-img-wrapper">
          <img
            src="{{ $imagePath }}"
            alt="{{ $text | default "" }}"
            class="h-full w-full object-cover"
            {{ if $context.Site.Params.enableImageLazyLoading | default true }}
              loading="lazy"
            {{ end }}
          />
        </div>
      {{- end }}
    {{- end }}
    
    {{- if $text }}
      <p class="text-center text-sm text-neutral-400 dark:text-neutral-500">{{ $text | markdownify }}</p>
    {{- end }}
  </div>
{{- end }}

